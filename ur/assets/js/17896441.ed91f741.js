"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[8401],{8325(e,n,r){r.d(n,{A:()=>g});var t=r(6540),o=r(2161),i=r(542),a=r(6347),s=r(4848);const l=({onPersonalize:e,isLoading:n,error:r})=>(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("button",{className:"button button--primary button--block",onClick:e,disabled:n,style:{width:"100%",cursor:n?"wait":"pointer",opacity:n?.7:1},children:n?"\u23f3 Personalizing...":"\ud83c\udfaf Personalize for My Level"}),r&&(0,s.jsxs)("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"var(--ifm-color-danger-contrast-background)",color:"var(--ifm-color-danger)",borderRadius:"4px",fontSize:"14px",border:"1px solid var(--ifm-color-danger)"},children:["\u26a0\ufe0f ",r]})]});var c=r(5719);const d=async(e,n,r)=>{const t="undefined"!=typeof window?window.GEMINI_API_KEY:"";if(!t)throw new Error("Gemini API Key is not configured. Please add GEMINI_API_KEY to your .env file.");const o=new c.ij(t).getGenerativeModel({model:"gemini-2.5-flash"}),i=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim().substring(0,5e3);if(!i||i.length<50)throw new Error("Content is too short or empty to personalize.");let a="";switch(n.level){case"beginner":a="\n- Use very simple, everyday language\n- Break down complex ideas into small, easy steps\n- Add lots of real-world examples and analogies\n- Explain technical terms in simple words\n- Use encouraging and friendly tone";break;case"intermediate":a=`\n- Use clear technical language but explain advanced concepts\n- Balance theory with practical examples\n- Include code snippets in ${n.languages.join(" or ")}\n- Reference related concepts briefly\n- Maintain professional but accessible tone`;break;case"advanced":a="\n- Use precise technical terminology freely\n- Include implementation details and optimization strategies\n- Add performance considerations and edge cases\n- Reference research papers or advanced techniques\n- Assume strong foundational knowledge"}const s=`You are rewriting technical documentation about "${r}" for a ${n.level} level audience.\n\nUser Profile:\n- Level: ${n.level}\n- Languages: ${n.languages.join(", ")}\n- AI Experience: ${n.aiExperience}\n- Hardware Knowledge: ${n.hardwareKnowledge}\n\nInstructions:${a}\n\nIMPORTANT: \n- Return ONLY the rewritten content in clean HTML format\n- Use proper HTML tags: <h2>, <h3>, <p>, <ul>, <li>, <code>, <pre>, <strong>\n- Do NOT include markdown code blocks or backticks\n- Do NOT add introductory phrases like "Here is..." or "Rewritten content:"\n- Start directly with the content\n\nOriginal Content:\n${i}\n\nRewritten HTML:`;try{const e=await o.generateContent(s);let n=e.response.text();if(n=n.replace(/```html\n?/gi,"").replace(/```\n?/g,"").replace(/^#+\s+.*$/gm,"").trim(),!n||n.length<100)throw new Error("Generated content is too short or empty.");return n}catch(l){if(console.error("Error calling Gemini API:",l),l.message?.includes("API_KEY_INVALID")||l.message?.includes("API key"))throw new Error("Invalid Gemini API Key. Please check your .env file.");if(l.message?.includes("not found"))throw new Error("Gemini model not available. Using 'gemini-pro' model.");throw new Error(`Personalization failed: ${l.message}`)}};var p=r(3305);function g(e){const{metadata:n}=(0,i.u)(),r=(0,a.W6)(),c=(0,a.zy)(),[g,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(null),w=p.y.getUser(),f=c.pathname.startsWith("/ur/");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"24px",padding:"16px",background:"linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%)",borderRadius:"12px",border:"1px solid #90CAF9",flexWrap:"wrap"},children:[(0,s.jsx)(l,{onPersonalize:async()=>{if(!w)return alert("Please login to personalize content"),void r.push("/login");u(!0),m(null);try{const e=document.querySelector(".theme-doc-markdown")?.textContent||"",r=await d(e,w.preferences,n.title||"Page");if(confirm("Content personalized! Click OK to view the personalized version.\n\nNote: This is a preview. Refresh the page to return to original content.")&&r){const e=document.querySelector(".theme-doc-markdown");if(e){const n=document.createElement("div");n.style.cssText="\n            background: #E3F2FD;\n            border: 2px solid #007BFF;\n            border-radius: 8px;\n            padding: 20px;\n            margin-bottom: 20px;\n          ",n.innerHTML=`\n            <h3 style="color: #007BFF; margin-top: 0;">\n              \ud83c\udfaf Personalized Content for ${w.preferences.level} Level\n            </h3>\n            <div style="white-space: pre-wrap; line-height: 1.6;">\n              ${r.replace(/\n/g,"<br>")}\n            </div>\n            <button onclick="this.parentElement.remove()"\n              style="\n                margin-top: 15px;\n                padding: 8px 16px;\n                background: #007BFF;\n                color: white;\n                border: none;\n                border-radius: 6px;\n                cursor: pointer;\n              ">\n              \u2715 Close Personalized View\n            </button>\n          `,e.insertBefore(n,e.firstChild)}}}catch(e){console.error("Personalization error:",e),m("Failed to personalize content. Please try again.")}finally{u(!1)}},isLoading:g,error:h}),(0,s.jsx)("button",{className:"button button--secondary",onClick:()=>{const e=f?c.pathname.replace("/ur/","/"):`/ur${c.pathname}`;r.push(e)},style:{flex:1,minWidth:"200px",background:f?"#28A745":"#007BFF",color:"white",border:"none",fontWeight:"600"},children:f?"\ud83c\uddec\ud83c\udde7 Switch to English":"\ud83c\uddf5\ud83c\uddf0 \u0627\u0631\u062f\u0648 \u0645\u06cc\u06ba \u067e\u0691\u06be\u06cc\u06ba"})]}),(0,s.jsx)(o.A,{...e})]})}}}]);